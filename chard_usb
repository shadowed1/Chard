#!/bin/bash
USB_DEVICES=$(lsblk -dpno NAME,TRAN | awk '$2=="usb"{print $1}')
if [ -z "$USB_DEVICES" ]; then
    echo "No USB drives detected."
    exit 1
fi

echo "Detected USB drives:"
echo "$USB_DEVICES"
echo

if [ $(echo "$USB_DEVICES" | wc -l) -gt 1 ]; then
    echo "Multiple USB drives found. Please enter the full path of the device to use:"
    read USB_DEV
else
    USB_DEV=$USB_DEVICES
fi

MOUNT_POINT="/tmp/usb_mount"
mkdir -p "$MOUNT_POINT"

PARTITION="${USB_DEV}1"
echo "Mounting $PARTITION to $MOUNT_POINT..."
sudo mount "$PARTITION" "$MOUNT_POINT"
if [ $? -ne 0 ]; then
    echo "Failed to mount $PARTITION"
    exit 1
fi
