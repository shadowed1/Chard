# <<< CHARD_ENV <<<

# <<< CHARD_ROOT_MARKER >>>
CHARD_ROOT=""
CHARD_HOME=""
CHARD_USER=""
# <<< END_CHARD_ROOT_MARKER >>>

case ":$PATH:" in
    *":$CHARD_ROOT/usr/bin:"*) ;;
    *) PATH="$PATH:$CHARD_ROOT/usr/bin" ;;
esac

case ":$PATH:" in
    *":$CHARD_ROOT/bin:"*) ;;
    *) PATH="$PATH:$CHARD_ROOT/bin" ;;
esac

export PATH

if [ -f "/home/chronos/user/.bashrc" ]; then
    if [ -d "/usr/share/fydeos_shell" ]; then
        DEFAULT_BASHRC="$HOME/.bashrc"
        BASHRC_PATH="$DEFAULT_BASHRC"
        IS_CHROMEOS=0
    else
        CHROMEOS_BASHRC="/home/chronos/user/.bashrc"
        BASHRC_PATH="$CHROMEOS_BASHRC"
        IS_CHROMEOS=1
    fi
else
    DEFAULT_BASHRC="$HOME/.bashrc"
    BASHRC_PATH="$DEFAULT_BASHRC"
    IS_CHROMEOS=0
fi

[ -f "$CHARD_ROOT/.chard.env" ] && source "$CHARD_ROOT/.chard.env"
[ -f "$CHARD_ROOT/.chard.logic" ] && source "$CHARD_ROOT/.chard.logic"

#if [ "$IS_CHROMEOS" -eq 1 ]; then
#    [ -f "$CHARD_ROOT/.chard.preload" ] && source "$CHARD_ROOT/.chard.preload"
#fi

chard() {
    case "$1" in
        reinstall)
            bash <(curl -s "https://raw.githubusercontent.com/shadowed1/Chard/main/Arch/Reinstall_Chard.sh?$(date +%s)")
            ;;
        *)
            "$CHARD_ROOT/bin/chard" "$@"
            ;;
    esac
}

alias cs='chard safe'
alias cr='chard root'
alias chariot='chard chariot'
alias cu='chard unmount'
alias virtm='sudo -E $CHARD_ROOT/bin/virtm'
CR="$CHARD_ROOT"

# <<< END CHARD_ENV <<<
